{"version":3,"sources":["../../../../node_modules/lucide-react/src/icons/bookmark.ts","../../../../lib/saved.ts","../../../../components/save-button.tsx","../../../../node_modules/lucide-react/src/icons/bookmark-check.ts","../../../../components/track-recent.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z', key: '1fy3hk' }],\n];\n\n/**\n * @component @name Bookmark\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTkgMjEtNy00LTcgNFY1YTIgMiAwIDAgMSAyLTJoMTBhMiAyIDAgMCAxIDIgMnYxNnoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/bookmark\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bookmark = createLucideIcon('bookmark', __iconNode);\n\nexport default Bookmark;\n","export type SavedKind = \"tool\" | \"prompt\" | \"update\" | \"collection\" | \"comparison\";\n\nexport type SavedItem = {\n  kind: SavedKind;\n  id: string;\n  slug: string;\n  title: string;\n  subtitle: string;\n  savedAtISO: string;\n};\n\nconst STORAGE_KEY = \"tooldrop_saved_v1\";\nexport const SAVED_EVENT = \"tooldrop:saved-changed\";\n\ntype SavedKey = { kind: SavedKind; id: string };\n\nimport { getUnifiedIndex, type UnifiedItem } from \"@/lib/data\";\n\nfunction readRaw(): SavedKey[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const raw = window.localStorage.getItem(STORAGE_KEY);\n    if (!raw) return [];\n    const parsed = JSON.parse(raw);\n    if (!Array.isArray(parsed)) return [];\n    return parsed\n      .filter((x) => x?.kind && x?.id)\n      .map((x) => ({ kind: x.kind as SavedKind, id: String(x.id) }));\n  } catch {\n    return [];\n  }\n}\n\nfunction writeRaw(keys: SavedKey[]) {\n  try {\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(keys));\n    window.dispatchEvent(new CustomEvent(SAVED_EVENT));\n  } catch {\n    // ignore\n  }\n}\n\nexport function readSaved(): SavedItem[] {\n  const keys = readRaw();\n  const all = getUnifiedIndex();\n  const map = new Map(all.map((it) => [`${it.kind}:${it.id}`, it] as const));\n\n  return keys\n    .map((k) => map.get(`${k.kind}:${k.id}`))\n    .filter(Boolean)\n    .map((it) => {\n      const x = it as UnifiedItem;\n      return {\n        kind: x.kind,\n        id: x.id,\n        slug: x.slug,\n        title: x.title,\n        subtitle: x.subtitle,\n        savedAtISO: new Date().toISOString(),\n      };\n    });\n}\n\nexport function clearSaved() {\n  if (typeof window === \"undefined\") return;\n  try {\n    window.localStorage.removeItem(STORAGE_KEY);\n    window.dispatchEvent(new CustomEvent(SAVED_EVENT));\n  } catch {\n    // ignore\n  }\n}\n\nexport function isSaved(kind: SavedKind, id: string) {\n  return readRaw().some((x) => x.kind === kind && x.id === id);\n}\n\nexport function toggleSaved(key: SavedKey, limit = 200) {\n  const keys = readRaw();\n  const exists = keys.some((x) => x.kind === key.kind && x.id === key.id);\n\n  const next = exists\n    ? keys.filter((x) => !(x.kind === key.kind && x.id === key.id))\n    : [{ kind: key.kind, id: key.id }, ...keys];\n\n  writeRaw(next.slice(0, limit));\n  return !exists;\n}\n\nexport function readSavedCount() {\n  return readRaw().length;\n}","\"use client\";\n\nimport * as React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Bookmark, BookmarkCheck } from \"lucide-react\";\n\nimport { isSaved, toggleSaved, SAVED_EVENT, type SavedKind } from \"@/lib/saved\";\n\nexport function SaveButton({\n  kind,\n  id,\n  className,\n  labelSaved = \"Saved\",\n  labelUnsaved = \"Save\",\n}: {\n  kind: SavedKind;\n  id: string;\n  className?: string;\n  labelSaved?: string;\n  labelUnsaved?: string;\n}) {\n  const [saved, setSaved] = React.useState(false);\n\n  React.useEffect(() => {\n    setSaved(isSaved(kind, id));\n  }, [kind, id]);\n\n  React.useEffect(() => {\n    const sync = () => setSaved(isSaved(kind, id));\n\n    // same-tab updates (our custom event)\n    window.addEventListener(SAVED_EVENT, sync as EventListener);\n\n    // cross-tab updates (localStorage event)\n    function onStorage(e: StorageEvent) {\n      if (e.key === \"tooldrop_saved_v1\") sync();\n    }\n    window.addEventListener(\"storage\", onStorage);\n\n    return () => {\n      window.removeEventListener(SAVED_EVENT, sync as EventListener);\n      window.removeEventListener(\"storage\", onStorage);\n    };\n  }, [kind, id]);\n\n  return (\n    <Button\n      type=\"button\"\n      variant={saved ? \"default\" : \"outline\"}\n      size=\"sm\"\n      className={className}\n      onClick={() => {\n        const next = toggleSaved({ kind, id });\n        setSaved(next);\n      }}\n      aria-label={saved ? \"Remove from saved\" : \"Save this item\"}\n    >\n      {saved ? <BookmarkCheck className=\"h-4 w-4 mr-2\" /> : <Bookmark className=\"h-4 w-4 mr-2\" />}\n      {saved ? labelSaved : labelUnsaved}\n    </Button>\n  );\n}","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z', key: '169p4p' }],\n  ['path', { d: 'm9 10 2 2 4-4', key: '1gnqz4' }],\n];\n\n/**\n * @component @name BookmarkCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTkgMjEtNy00LTcgNFY1YTIgMiAwIDAgMSAyLTJoMTBhMiAyIDAgMCAxIDIgMloiIC8+CiAgPHBhdGggZD0ibTkgMTAgMiAyIDQtNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/bookmark-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookmarkCheck = createLucideIcon('bookmark-check', __iconNode);\n\nexport default BookmarkCheck;\n","\"use client\";\n\nimport * as React from \"react\";\nimport { addRecent, type RecentKind } from \"@/lib/recent\";\n\ntype Props = {\n  kind: RecentKind;\n  id: string;\n  slug: string;\n  title: string;\n  subtitle: string;\n};\n\nexport function TrackRecent({ kind, id, slug, title, subtitle }: Props) {\n  React.useEffect(() => {\n    addRecent({ kind, id, slug, title, subtitle });\n    // run once per page load\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return null;\n}"],"names":[],"mappings":"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","ignoreList":[0,3]}